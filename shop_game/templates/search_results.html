{% extends 'base.html' %}

{% block title %}Home{% endblock %}
{% load static %}
{% block content %}
<div class="slideshow-container">

      <div>
        <img class="img-fluid" src="{% static 'svg/fps.jpg' %}" alt="..." style="width:100%">
      </div>

</div>
  <div class="nav-bar-main">
    <nav class="navbar navbar-expand-sm navbar-dark" aria-label="Third navbar example">
      <div class="container-fluid">
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto mb-2 mb-sm-0">
            <li class="nav-item nav-center nv-abs">
              <a href="#" class="nav-link nav-main-2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Категории игр</a>

              <div class="dropdown-menu menu-dp" aria-labelledby="userMenu">
                <button class="dropdown-item pos" data-filter="all" href="#">Сбросить фильтр</button>
                <div class="dropdown-divider"></div>
                <button class="dropdown-item pos" data-filter="RPG" href="#">RPG</button>
              <div class="dropdown-divider"></div>
                <button class="dropdown-item pos" data-filter="SoulsLike" href="#">SoulsLike</button>
                <div class="dropdown-divider"></div>
                <button class="dropdown-item pos" data-filter="Adventure" href="#">Adventure</button>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>

<div>
    <ul class="products clearfix list-games">
      {% for product in object_list %}
          {% if product.group == "RPG" %}
            <li class="product-wrapper {{ product.group }}">
              <div href="#" class="product ">
                <div class="product-photo">
                  <img src="/{{product.cover}} " alt="{{ product.title }}">
                </div>
                <div class="inform-product pullUp">
                  <p class="price" style="color:white;">{{product.price}}Р</p>
                  <a href="{% url 'buy_item' product.pk %}" class="button-buy btn" style="color:white;" role="button">Купить</a>
                  <a href="{% url 'product_detail' product.pk %}" class="button-detail btn" style="color:white;" role="button">О товаре</a>
                </div>
              </div>
            </li>
          {% elif product.group == "Shooter" %}
            <li class="product-wrapper {{ product.group }}">
              <div href="#" class="product">
                <div class="product-photo">
                  <img src="/{{product.cover}} " alt="{{ product.title }}">
                </div>
                <div class="inform-product pullUp">
                  <p class="price" style="color:white;">{{product.price}}Р</p>
                  <a href="{% url 'buy_item' product.pk %}" class="button-buy btn" style="color:white;" role="button">Купить</a>
                  <a href="{% url 'product_detail' product.pk %}" class="button-detail btn" style="color:white;" role="button">О товаре</a>
                </div>
              </div>
            </li>
          {% elif product.group == "Adventure" %}
            <li class="product-wrapper {{ product.group }}">
              <div href="#" class="product">
                <div class="product-photo">
                  <img src="/{{product.cover}} " alt="{{ product.title }}">
                </div>
                <div class="inform-product pullUp">
                  <p class="price" style="color:white;">{{product.price}}Р</p>
                  <a href="{% url 'buy_item' product.pk %}" class="button-buy btn" style="color:white;" role="button">Купить</a>
                  <a href="{% url 'product_detail' product.pk %}" class="button-detail btn" style="color:white;" role="button">О товаре</a>
                </div>
              </div>
            </li>
          {% elif product.group == "SoulsLike" %}
            <li class="product-wrapper {{ product.group }}">
              <div href="#" class="product">
                <div class="product-photo">
                  <img src="/{{product.cover}} " alt="{{ product.title }}">
                </div>
                <div class="inform-product pullUp">
                  <p class="price" style="color:white;">{{product.price}}Р</p>
                  <a href="{% url 'buy_item' product.pk %}" class="button-buy btn" style="color:white;" role="button">Купить</a>
                  <a href="{% url 'product_detail' product.pk %}" class="button-detail btn" style="color:white;" role="button">О товаре</a>
                </div>
              </div>
            </li>
            {% elif product.group == "Roguelike" %}
            <li class="product-wrapper {{ product.group }}">
              <div href="#" class="product">
                <div class="product-photo">
                  <img src="{{product.cover}} " alt="{{ product.title }}">
                </div>
                <div class="inform-product pullUp">
                  <p class="price" style="color:white;">{{product.price}}Р</p>
                  <a href="{% url 'buy_item' product.pk %}" class="button-buy btn" style="color:white;" role="button">Купить</a>
                  <a href="{% url 'product_detail' product.pk %}" class="button-detail btn" style="color:white;" role="button">О товаре</a>
                </div>
              </div>
            </li>

          {% endif %}
      {% endfor %}
    </ul>
    {% if user.is_superuser %}
    <div class="form-group"><a href="{% url 'Add_game' %}" class="btn btn-block add_game" type="submit" style="width: 10%;">Добавить товар</a></div>
    {% endif %}
</div>
<ul class="pagination">
    {% if page_obj.has_previous %}
        {% if page_obj.number|add:'-3' > 1 %}
            <li class="pagination__item">
                <a href="?{{ genre }}{{ year }}page=1">1</a>
            </li>
        {% endif %}
        {% if page_obj.number|add:'-3' >= 3 %}
            <li class="pagination__item pagination__item--dots">
                    <a href="?{{ genre }}{{ year }}page={{ page_obj.previous_page_number|add:'-3' }}">
                <span class="pagination__link">• • •</span>
                </a>
            </li>
        {% endif %}
    {% endif %}
    {% if paginator.page_range|length > 1 %}
        {% for i in paginator.page_range %}
            {% if page_obj.number == i %}
                <li class="pagination__item active">
                    <a class="pagination__link" href="#">{{ i }}</a>
                </li>
            {% elif i > page_obj.number|add:'-4' and i < page_obj.number|add:'4' %}
                <li class="pagination__item">
                        <a class="pagination__link" href="?{{ genre }}{{ year }}page={{ i }}">{{ i }}</a>
                </li>
            {% endif %}
        {% endfor %}
    {% endif %}
    {% if page_obj.has_next %}
        {% if page_obj.number|add:'4' < page_obj.paginator.num_pages %}
            <li class="pagination__item pagination__item--dots">
                    <a href="?{{ genre }}{{ year }}page={{ page_obj.next_page_number|add:'3' }}">
                <span class="pagination__link">• • •</span>
                </a>
            </li>
        {% endif %}
        {% if page_obj.number|add:'3' < page_obj.paginator.num_pages %}
            <li class="pagination__item">
                    <a class="pagination__link" href="?{{ genre }}{{ year }}page={{ page_obj.paginator.num_pages }}">
                        {{ page_obj.paginator.num_pages }}
                    </a>
            </li>
        {% endif %}
    {% endif %}
</ul>


{% endblock %}